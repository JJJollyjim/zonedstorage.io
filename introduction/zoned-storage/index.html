<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Linux Zoned Storage Documentation">
    
    <link rel="canonical" href="https://westerndigitalcorporation.github.io/zonedstorage.io/introduction/zoned-storage/">
    <link rel="shortcut icon" href="../../img/favicon.ico">

    
    <title>Zoned Storage Overview - Zoned Storage</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    

    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D23L5EBB2E"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-D23L5EBB2E');
    </script>
    

     
</head>

<body style="padding-top:90px" >

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            <a class="navbar-brand" href="../..">1 - Zoned Storage</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">3 - Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../community/">3 - Community</a>
                    </li>
                
                
                
                    <li class="dropdown active" style="min-height:60;">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">2 - Documentation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
  
  
  
  <li class="dropdown-submenu active">
    <a tabindex="-1" href="introduction/">5 -  - Introduction</a>
    <ul class="dropdown-menu">
        
            
<li class="active">
    <a href="./">4 - Zoned Storage Overview</a>
</li>

        
            
<li >
    <a href="../smr/">4 - Shingled Magnetic Recording (SMR) HDDs</a>
</li>

        
            
<li >
    <a href="../zns/">4 - Zoned Namespace (ZNS) SSDs</a>
</li>

        
    </ul>
  </li>

                        
                            
  
  
  
  <li class="dropdown-submenu">
    <a tabindex="-1" href="getting-started/">5 -  - Getting Started</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../getting-started/prerequisite/">4 - System Prerequisite</a>
</li>

        
            
<li >
    <a href="../../getting-started/nullblk/">4 - Getting Started with an Emulated Zoned Block Device</a>
</li>

        
            
<li >
    <a href="../../getting-started/smr-disk/">4 - Getting Started With SMR Disks</a>
</li>

        
            
<li >
    <a href="../../getting-started/smr-emulation/">4 - Getting Started With Emulated SMR Disks</a>
</li>

        
            
<li >
    <a href="../../getting-started/zns-emulation/">4 - Getting Started With Emulated NVMe ZNS Devices</a>
</li>

        
    </ul>
  </li>

                        
                            
  
  
  
  <li class="dropdown-submenu">
    <a tabindex="-1" href="linux/">5 -  - Linux Kernel Support</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../linux/overview/">4 - Support Overview</a>
</li>

        
            
<li >
    <a href="../../linux/config/">4 - Kernel Configuration</a>
</li>

        
            
<li >
    <a href="../../linux/zbd-api/">4 - User Interface</a>
</li>

        
            
<li >
    <a href="../../linux/sched/">4 - Write Command Ordering</a>
</li>

        
            
<li >
    <a href="../../linux/part/">4 - Zoned Block Device Partition Support</a>
</li>

        
            
<li >
    <a href="../../linux/dm/">4 - Device Mapper</a>
</li>

        
            
<li >
    <a href="../../linux/fs/">4 - File Systems</a>
</li>

        
    </ul>
  </li>

                        
                            
  
  
  
  <li class="dropdown-submenu">
    <a tabindex="-1" href="projects/">5 -  - Applications and Libraries</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../projects/util-linux/">4 - Linux System Utilities</a>
</li>

        
            
<li >
    <a href="../../projects/sg3utils/">4 - SCSI Generic Utilities</a>
</li>

        
            
<li >
    <a href="../../projects/libzbc/">4 - libzbc User Library</a>
</li>

        
            
<li >
    <a href="../../projects/libnvme/">4 - libnvme User Library</a>
</li>

        
            
<li >
    <a href="../../projects/libzbd/">4 - libzbd User Library</a>
</li>

        
            
<li >
    <a href="../../projects/tcmu-runner/">4 - tcmu-runner ZBC Disk Emulation</a>
</li>

        
            
<li >
    <a href="../../projects/qemu/">4 - QEMU and KVM</a>
</li>

        
            
<li >
    <a href="../../projects/zns/">4 - Linux Tools for ZNS</a>
</li>

        
    </ul>
  </li>

                        
                            
  
  
  
  <li class="dropdown-submenu">
    <a tabindex="-1" href="tests/">5 -  - System Compliance Tests</a>
    <ul class="dropdown-menu">
        
            
<li >
    <a href="../../tests/zbc-tests/">4 - ZBC/ZAC Compliance Tests</a>
</li>

        
            
<li >
    <a href="../../tests/blktests/">4 - Kernel Block Layer Tests</a>
</li>

        
    </ul>
  </li>

                        
                            
<li >
    <a href="../../distributions/linux/">4 - Linux Distributions</a>
</li>

                        
                            
<li >
    <a href="../../benchmarking/fio/">4 - Benchmarking</a>
</li>

                        
                            
<li >
    <a href="../../faq/faq/">4 - Frequently Asked Questions</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../../about/">3 - About</a>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                            <i class="fas fa-search"></i> Search
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../../community/">
                            <i class="fas fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="next" href="../smr/">
                            Next <i class="fas fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

    
    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
  <h5 style="text-align:center"><b>Table of contents</b></h5>
  <ul class="nav bs-sidenav">

  

    

      

        
        
        
          <li class="first-level active"><a href="/introduction/" style="font-weight:bold">Introduction</a></li>
          
        

        

  	  

  	  
            
              <li class="second-level active"><a href="#zoned-storage-overview">Zoned Storage Overview</a></li>
              
                <li class="third-level"><a href="#principle">Principle</a></li>
                
              
                <li class="third-level"><a href="#linux-ecosystem-support">Linux Ecosystem Support</a></li>
                
              
                <li class="third-level"><a href="#developing-for-zoned-storage">Developing for Zoned Storage</a></li>
                
              
            
          

        

  	  
            <li class="second-level"><a href="../smr/">Shingled Magnetic Recording (SMR) HDDs</a></li>
          

  	  

        

  	  
            <li class="second-level"><a href="../zns/">Zoned Namespace (ZNS) SSDs</a></li>
          

  	  

        

      

    

      

        
        
        
          <li class="first-level"><a href="../../getting-started">Getting Started</a></li>
          
        

        

  	  

  	  

        

  	  

  	  

        

  	  

  	  

        

  	  

  	  

        

  	  

  	  

        

      

    

      

        
        
        
          <li class="first-level"><a href="../../linux">Linux Kernel Support</a></li>
          
        

        

  	  

  	  

        

  	  

  	  

        

  	  

  	  

        

  	  

  	  

        

  	  

  	  

        

  	  

  	  

        

  	  

  	  

        

      

    

      

        
        
        
          <li class="first-level"><a href="../../projects">Applications and Libraries</a></li>
          
        

        

  	  

  	  

        

  	  

  	  

        

  	  

  	  

        

  	  

  	  

        

  	  

  	  

        

  	  

  	  

        

  	  

  	  

        

  	  

  	  

        

      

    

      

        
        
        
          <li class="first-level"><a href="../../tests">System Compliance Tests</a></li>
          
        

        

  	  

  	  

        

  	  

  	  

        

      

    

      

        <li class="first-level"><a href="../../distributions/linux/">Linux Distributions</a></li>

      

    

      

        <li class="first-level"><a href="../../benchmarking/fio/">Benchmarking</a></li>

      

    

      

        <li class="first-level"><a href="../../faq/faq/">Frequently Asked Questions</a></li>

      

    

  

  </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="zoned-storage-overview">Zoned Storage Overview</h1>
<p>Zoned storage devices are a class of storage devices with an address space that
is divided into zones which have write constraints different from regular
storage devices.</p>
<h2 id="principle">Principle</h2>
<p>The zones of zoned storage devices must be written sequentially. Each zone of
the device address space has a write pointer that keeps track of the position
of the next write. Data in a zone cannot be directly overwritten. The zone must
first be erased using a special command (zone reset). The figure below
illustrates this principle.</p>
<p><center>
<img alt="zoned storage" src="../../assets/img/intro-zoned-storage.png"
title="Zoned Storage Devices Principle" width="640" style="max-width:100%;">
<br><em>Zoned Storage Devices Principle</em></br>
</center></p>
<p>Zoned storage devices can be implemented using various recording and media
technologies. The most common form of zoned storage today uses the SCSI Zoned
Block Commands (ZBC) and Zoned ATA Commands (ZAC) interfaces on
<a href="../smr/">Shingled Magnetic Recording (SMR)</a> HDDs. ZBC and ZAC enable a zoned
block storage model; SMR technology enables continued areal density growth to
meet the demands for expanding data needs, and requires the zoned block access
model.</p>
<p>Solid State Disks (SSD) storage devices can also implement a zoned interface to
reduce write amplification, reduce the device DRAM needs and improve quality of
service at scale. The <a href="../zns/">NVMe Zoned NameSpace (ZNS)</a> is a technical
proposal of the NVMe standard committee adding a zoned storage interface to
the NVMe interface standard.</p>
<h2 id="linux-ecosystem-support">Linux Ecosystem Support</h2>
<p>Zoned storage devices are not plug-and-play replacement of traditional storage
devices due to the sequential write constraints of zones. Special software and
drivers are required to ensure compliance of the application operation to the
device constraints.</p>
<p>Support for zoned storage device was added to the Linux&reg; kernel with the
release of version 4.10.0 and enables support for zoned storage at different
levels (disk driver, file system, device mapper drivers), offering a wide range
of options for supporting applications. This support is based on the
Zoned Block Device (ZBD) abstraction.</p>
<p>A zoned block device is a generic representation of a zoned storage device
independent of the device access protocol and interface. This abstraction is
the basis of Linux kernel support for zoned storage.</p>
<p>The interface associated with the ZBD device abstraction is an extension to the
traditional Linux block device interface. The ZBD interface, combined with
device drivers, provide to kernel subsystems (e.g. File systems) and to user
applications a generic zone management interface compatible across all zoned
device types and access protocols.</p>
<p>A simplified view of the kernel structure including the ZBD interface is shown
in the figure below.</p>
<p><center>
<img alt="linux-support-overview" src="../../assets/img/intro-linux-zbd.png"
title="Linux kernel Zoned Storage Device Support Overview"
style="max-width:100%;">
<br><em>Linux kernel Zoned Storage Device Support Overview</em></br>
</center></p>
<p>Linux ZBD interface implementation provides functions to discover the zone
configuration of a zoned device and functions to manage zones (e.g. Zone reset).
Furthermore, the Linux kernel ZBD support also modifies the kernel block I/O
stack to ensure that the device access constraints (zone spanning commands,
sequential write ordering, etc) are met.</p>
<h2 id="developing-for-zoned-storage">Developing for Zoned Storage</h2>
<p>There are several ways to design a system application for zoned storage
depending on one's system structure and ability to modify the application layer
and Linux kernel being used.</p>
<ol>
<li>
<p>Users that own software applications and do not depend on the operating
   system and file system to control the device can directly use the device
   interface protocol to issue zone management commands using a passthrough
   interface. In such case, the applications will need to be re-written with
   the new command sets as well as ensuring that all data streams are
   sequential. The <a href="../../projects/libzbc/"><em>libzbc</em> library</a> provides functions
   facilitating the implementation of applications using such approach.</p>
</li>
<li>
<p>Managing zoned storage directly from the application layer is a valid
   approach but can be difficult to implement, particularly for use cases where
   several device features must be combined (e.g. Using I/O priorities).
   Application level support can be simplified by relying on the
   kernel ZBD support which allows accessing and managing zoned devices using
   regular POSIX system calls. While this does not remove the zoned device
   access constraints from the application scope, implementation of sequential
   write streams and zone management can be simplified.</p>
</li>
<li>
<p>If a user lacks the software control at the application level while retaining
   control over Linux kernel version choices, more advanced kernel support
   features such as ZBD compliant file systems can be used to hide zoned storage
   access constraints from the application. Users may also rely on
   a device mapper driver exposing zoned storage devices as regular block
   devices. With such solution, existing file systems can be used without any
   modification.</p>
</li>
</ol>
<p>More information on the features provided by the Linux kernel for different
versions can be found <a href="../../linux/overview/">here</a>.</p>
<p>To get started with zoned storage, the
<a href="../../getting-started/prerequisite/">Getting Started with SMR</a> section details
the first step necessary to setup and verify a system using SMR disks. The
<a href="../../distributions/linux/">Linux Distributions</a> section provides information
regarding the availability of the ZBD interface on various Linux distributions.
Various tools and open source projects supporting zoned storage are documented
in the <a href="../../projects/">Applications and Libraries</a> section.</p></div>
        
        
    </div>
    

    <footer class="col-md-12 text-center">
        
        <span class="text-muted" style="color:hsla(0,0%,100%,.7);font-size:13px;">
	&copy; 2020 Western Digital Corporation or its affiliates. All rights reserved.<br>
        By using this site, you agree to the <a href="https://www.westerndigital.com/legal/terms-of-use"
	target="_blank" style="color:white;">Terms of Use</a> and
	<a href="https://www.westerndigital.com/legal/privacy-statement" target="_blank" style="color:white;">Privacy Statement</a>.
        All example scripts and program snippets on this site are licensed under
	<a href="https://creativecommons.org/publicdomain/zero/1.0/" target="_blank" style="color:white;">CC0 1.0 Universal</a>.<br>
	Documentation built with <a href="https://www.mkdocs.org/" target="_blank" style="color:white;">MkDocs</a> using a theme
	based on <a href="https://sourcefoundry.org/cinder/" target="_blank" style="color:white;">Cinder</a>.
        </span>
        
    </footer>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
                <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/languages/c.min.js"></script>
                <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/languages/bash.min.js"></script>
                <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/languages/plaintext.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>
    <script src="../../search/main.js"></script>

    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form>
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
</body>

</html>
