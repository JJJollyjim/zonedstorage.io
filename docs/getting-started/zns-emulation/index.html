<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.ff31de0ff">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Zoned Storage Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Zoned Storage Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0DX1KGD5E4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0DX1KGD5E4",{})</script><title data-react-helmet="true">Getting Started with Emulated NVMe ZNS Devices | Zoned Storage</title><meta data-react-helmet="true" property="og:url" content="https://zonedstorage.io/docs/getting-started/zns-emulation"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Getting Started with Emulated NVMe ZNS Devices | Zoned Storage"><meta data-react-helmet="true" name="description" content="Emulated NVMe ZNS devices make it possible to do application development and"><meta data-react-helmet="true" property="og:description" content="Emulated NVMe ZNS devices make it possible to do application development and"><link data-react-helmet="true" rel="shortcut icon" href="/img/zs-logo.ico"><link data-react-helmet="true" rel="canonical" href="https://zonedstorage.io/docs/getting-started/zns-emulation"><link data-react-helmet="true" rel="alternate" href="https://zonedstorage.io/docs/getting-started/zns-emulation" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://zonedstorage.io/docs/getting-started/zns-emulation" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.30532e53.css">
<link rel="preload" href="/assets/js/runtime~main.18692684.js" as="script">
<link rel="preload" href="/assets/js/main.e827f9a4.js" as="script">
</head>
<body data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/zs-logo.png" alt="Zoned Storage Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/zs-logo.png" alt="Zoned Storage Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Zoned Storage</strong></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/introduction">Documentation</a><a class="navbar__item navbar__link" href="/docs/community/support">Community</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/westerndigitalcorporation/zonedstorage.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_cxYs react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="dsla-search-wrapper"><div class="dsla-search-field"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/zs-logo.png" alt="Zoned Storage Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/img/zs-logo.png" alt="Zoned Storage Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><strong class="navbar__title">Zoned Storage</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/docs/introduction">Documentation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/community/support">Community</a></li><li class="menu__list-item"><a href="https://github.com/westerndigitalcorporation/zonedstorage.io" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_lDyR"><div class="docSidebarContainer_0YBq" role="complementary"><div class="sidebar_a3j0"><div class="menu menu--responsive thin-scrollbar menu_cyFh"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_iZzd" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Introduction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction/zoned-storage">Zoned Storage Devices</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction/smr">Shingled Magnetic Recording</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/introduction/zns">NVMe Zoned Namespaces (ZNS) SSDs</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/prerequisites">System Prerequisites</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/nullblk">Zoned Block Device Emulation with nullblk</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/smr-disk">Getting Started with SMR Hard-Disks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/smr-emulation">Getting Started with Emulated SMR Hard-Disks</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/getting-started/zns-emulation">Getting Started with Emulated NVMe ZNS Devices</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Linux Kernel Support</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/linux">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/linux/overview">Linux Kernel Zoned Storage Support</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/linux/config">Kernel Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/linux/zbd-api">Zoned Block Device User Interface</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/linux/sched">Write Ordering Control</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/linux/part">Zoned Block Device Partition Support</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/linux/dm">Device Mapper</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/linux/fs">File Systems</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Applications</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/applications">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/applications/percona-server">Percona Server for MySQL</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/applications/zenfs">RocksDB with ZenFS</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Tools and Libraries</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tools">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tools/util-linux">Linux System Utilities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tools/zns">ZNS Tools</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tools/sg3utils">SCSI Generic Utilities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tools/libzbc">libzbc User Library</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tools/libzbd">libzbd User Library</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tools/libnvme">libnvme User Library</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tools/tcmu-runner">tcmu-runner ZBC Disk Emulation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tools/qemu">QEMU and KVM</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">System Compliance Tests</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tests">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tests/zbc-tests">ZBC/ZAC Compliance Tests</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/tests/blktests">Kernel Block Layer Tests</a></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/distributions/linux">Linux Distributions</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/benchmarking/benchmark">Benchmarking Zoned Block Devices</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/faq/faq">Frequently Asked Questions</a></li></ul></div></div></div><main class="docMainContainer_r8cw"><div class="container padding-vert--lg docItemWrapper_NJLN"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">Getting Started with Emulated NVMe ZNS Devices</h1></header><div class="markdown"><p>Emulated NVMe ZNS devices make it possible to do application development and
kernel tests even if you do not have access to physical NVMe ZNS devices. There
are two ways to emulate NVMe ZNS devices.</p><ul><li><p><strong><em>null_blk</em></strong>: The null_blk kernel driver is equipped to emulate zoned block
devices with a zone configuration that is compatible with real NVMe ZNS
devices. This method is discussed in more detail in the
<a href="/docs/getting-started/nullblk">Zoned Block Device Emulation with null_blk</a> chapter of the
Getting Started Guide.</p></li><li><p><strong><em>QEMU</em></strong>: This open source machine emulator and virtualizer is equipped to
create emulated NVMe devices that use regular files on the host as a
backstores. Recent versions of QEMU support the emulation of Zoned
Namespaces.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="qemu"></a><em>QEMU</em><a class="hash-link" href="#qemu" title="Direct link to heading">#</a></h2><p><em><a href="https://www.qemu.org/" target="_blank" rel="noopener noreferrer">QEMU</a></em> has supported the
emulation of NVMe namespaces since version 1.6. But the emulation of zoned
namespaces has been supported only since version 6.0 of <em>QEMU</em>. If the host
Linux distribution does not provide <em>QEMU</em> version 6.0 or above, <em>QEMU</em> has
to be compiled from source. Detailed information on how to compile and install
<em>QEMU</em> from source can be found <a href="https://www.qemu.org/download/#source" target="_blank" rel="noopener noreferrer">on the QEMU download page</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="creating-an-emulated-zoned-namespace"></a>Creating an Emulated Zoned Namespace<a class="hash-link" href="#creating-an-emulated-zoned-namespace" title="Direct link to heading">#</a></h3><p>To create an emulated zoned namespace, you must first have a backing-store file
that the namespace can use. The size of the file determines the capacity of the
namespace that will be seen from the guest OS running in the <em>QEMU</em> virtual
machine.</p><p>For example: to create a 32GiB zoned namespace, you must first create a 32 GiB
file on the host. This can be done by using the <em>truncate</em> command to
create a sparse file or by using the <em>dd</em> command to create a fully allocated file.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="creating-the-backstore"></a>Creating the Backstore<a class="hash-link" href="#creating-the-backstore" title="Direct link to heading">#</a></h4><p>This guide provides instructions for two methods of creating the backstore file:</p><ol><li>Using truncate</li><li>Using dd</li></ol><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="using-truncate-to-create-an-emulated-zone-namespace-backstore"></a>Using truncate to create an Emulated Zone Namespace Backstore<a class="hash-link" href="#using-truncate-to-create-an-emulated-zone-namespace-backstore" title="Direct link to heading">#</a></h5><p>Run the following command to use <code>truncate</code> to create a backstore file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI plaintext"><div tabindex="0" class="prism-code language-plaintext codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># truncate -s 32G /var/lib/qemu/images/zns.raw</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># ls -l /var/lib/qemu/images/zns.raw</span></div><div class="token-line" style="color:#393A34"><span class="token plain">-rw-r--r-- 1 root root 34359738368 Jun 21 15:13 /var/lib/qemu/images/zns.raw</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="using-dd-to-create-an-emulated-zone-namespace-backstore"></a>Using dd to create an Emulated Zone Namespace Backstore<a class="hash-link" href="#using-dd-to-create-an-emulated-zone-namespace-backstore" title="Direct link to heading">#</a></h5><p>Run the following command to use <code>dd</code> to create a backstore file:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI plaintext"><div tabindex="0" class="prism-code language-plaintext codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># dd if=/dev/zero of=/var/lib/qemu/images/zns.raw bs=1M count=32768</span></div><div class="token-line" style="color:#393A34"><span class="token plain">32768+0 records in</span></div><div class="token-line" style="color:#393A34"><span class="token plain">32768+0 records out</span></div><div class="token-line" style="color:#393A34"><span class="token plain">34359738368 bytes (34 GB, 32 GiB) copied, 11.4072 s, 3.0 GB/s</span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"># ls -l /var/lib/qemu/images/zns.raw</span></div><div class="token-line" style="color:#393A34"><span class="token plain">-rw-r--r-- 1 root root 34359738368 Jun 22 11:22 /var/lib/qemu/images/zns.raw</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="creating-a-zns-and-using-the-backstore-file"></a>Creating a ZNS and using the Backstore File<a class="hash-link" href="#creating-a-zns-and-using-the-backstore-file" title="Direct link to heading">#</a></h4><p>Execute <em>QEMU</em> with command line options and arguments to create a zoned
namespace that uses the backstore file as storage. In the following example,
the backstore file is used to emulate a zoned namespace that has zones of 64
MiB and a zone capacity of 62 MiB. The namespace block size is 4096 B.  The
namespace is set to allow at most 16 open zones and 32 active zones.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI plaintext"><div tabindex="0" class="prism-code language-plaintext codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># /usr/local/bin/qemu-system-x86_64 \</span></div><div class="token-line" style="color:#393A34"><span class="token plain">...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">-device nvme,id=nvme0,serial=deadbeef,zoned.zasl=5 \</span></div><div class="token-line" style="color:#393A34"><span class="token plain">-drive file=${znsimg},id=nvmezns0,format=raw,if=none \</span></div><div class="token-line" style="color:#393A34"><span class="token plain">-device nvme-ns,drive=nvmezns0,bus=nvme0,nsid=1,logical_block_size=4096,\</span></div><div class="token-line" style="color:#393A34"><span class="token plain">physical_block_size=4096,zoned=true,zoned.zone_size=64M,zoned.\</span></div><div class="token-line" style="color:#393A34"><span class="token plain">zone_capacity=62M,zoned.max_open=16,zoned.max_active=32,\</span></div><div class="token-line" style="color:#393A34"><span class="token plain">uuid=5e40ec5f-eeb6-4317-bc5e-c919796a5f79</span></div><div class="token-line" style="color:#393A34"><span class="token plain">...</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="verifying-an-emulated-zoned-namespace"></a>Verifying an Emulated Zoned Namespace<a class="hash-link" href="#verifying-an-emulated-zoned-namespace" title="Direct link to heading">#</a></h3><p>If your guest operating system is a Linux distribution and the Linux
distribution&#x27;s kernel version is higher than 5.9.0, the emulated NVMe ZNS
device can be checked using the <em>nvme</em> command (see <a href="/docs/tools/zns">Linux Tools for
ZNS</a>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># nvme list</span></div><div class="token-line" style="color:#393A34"><span class="token plain">Node             SN                   Model                                    Namespace Usage                      Format           FW Rev</span></div><div class="token-line" style="color:#393A34"><span class="token plain">---------------- -------------------- ---------------------------------------- --------- -------------------------- ---------------- --------</span></div><div class="token-line" style="color:#393A34"><span class="token plain">/dev/nvme0n1     deadbeef             QEMU NVMe Ctrl                           1          34.36  GB /  34.36  GB      4 KiB +  0 B   1.0</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>The <em>lsscsi</em> utility shows the emulated NVMe device:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># lsscsi -g</span></div><div class="token-line" style="color:#393A34"><span class="token plain">[2:0:0:0]    cd/dvd  QEMU     QEMU DVD-ROM     2.5+  /dev/sr0   /dev/sg0</span></div><div class="token-line" style="color:#393A34"><span class="token plain">[N:0:0:1]    disk    QEMU NVMe Ctrl__1                          /dev/nvme0n1  -</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>Using the <em>blkzone</em> utility, the namespace zone configuration can be inspected.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># blkzone report /dev/nvme0n1 | less</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000000000, len 0x020000, cap 0x01f000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000020000, len 0x020000, cap 0x01f000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000040000, len 0x020000, cap 0x01f000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000060000, len 0x020000, cap 0x01f000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000080000, len 0x020000, cap 0x01f000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">...</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  start: 0x003f80000, len 0x020000, cap 0x01f000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  start: 0x003fa0000, len 0x020000, cap 0x01f000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  start: 0x003fc0000, len 0x020000, cap 0x01f000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span></div><div class="token-line" style="color:#393A34"><span class="token plain">  start: 0x003fe0000, len 0x020000, cap 0x01f000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The total number of zones of the namespace directly depends on the size of the
backstore file used and on the zone size configured. In the above example, the
emulated namespace has 512 zones (32 GiB / 64 MiB).</p></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># cat /sys/block/nvme0n1/queue/nr_zones </span></div><div class="token-line" style="color:#393A34"><span class="token plain">512</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>If the emulated namespace is configured with a zone capacity smaller than the
zone size, the total capacity defined by the backstore file will not be
usable. The effective usable capacity can be reported using <em>blkzone</em> with the
<em>capacity</em> command, as shown here:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><div tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain"># blkzone capacity /dev/nvme0n1</span></div><div class="token-line" style="color:#393A34"><span class="token plain">0x003e00000</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>In this case, the namespace&#x27;s effective storage capacity is 0x003e00000
(65011712) 512-Byte sectors, which is equivalent to 512 zones of 62 MiB
capacity.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="using-an-emulated-zoned-namespace"></a>Using an Emulated Zoned Namespace<a class="hash-link" href="#using-an-emulated-zoned-namespace" title="Direct link to heading">#</a></h3><p>The behavior of a <em>QEMU</em>-emulated NVMe ZNS device is fully compliant with the
NVMe ZNS specifications, with one exception: the state of namespace zones is
not persistent across restarts of the <em>QEMU</em> emulation. The state of zones is
preserved only as long as <em>QEMU</em> is running, even if the guest operating system
is rebooted. If <em>QEMU</em> is restarted and the same backstore file is used, then
the guest operating system will see the namespace with all zones in the empty
state.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="emulated-zoned-namespace-options"></a>Emulated Zoned Namespace Options<a class="hash-link" href="#emulated-zoned-namespace-options" title="Direct link to heading">#</a></h3><p>The implementation of NVMe device emulation and ZNS namespace emulation in
<em>QEMU</em> provides several configuration options to control the characteristics of
the device. The full list of options and parameters is
documented <a href="https://qemu-project.gitlab.io/qemu/system/nvme.html" target="_blank" rel="noopener noreferrer">here</a>.</p><p>The options and parameters related to Zoned Namespaces are as follows.</p><center><table><thead><tr><th align="left">Option</th><th align="left">Default Value</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left">zoned.zasl=UINT32</td><td align="left">0</td><td align="left">Zone Append Size Limit. If left at the default (0), the zone append size limit will be equal to the maximum data transfer size (MDTS). Otherwise, the zone append size limit is equal to 2 to the power of zasl multiplied by the minimum memory page size (4096 B), but cannot exceed the maximum data transfer size.</td></tr><tr><td align="left">zoned.zone_size=<em>SIZE</em></td><td align="left">128MiB</td><td align="left">Define the zone size (ZSZE)</td></tr><tr><td align="left">zoned.zone_capacity=<em>SIZE</em></td><td align="left">0</td><td align="left">Define the zone capacity (ZCAP). If left at the default (0), the zone capacity will equal the zone size.</td></tr><tr><td align="left">zoned.descr_ext_size=<em>UINT32</em></td><td align="left">0</td><td align="left">Set the Zone Descriptor Extension Size (ZDES). Must be a multiple of 64 bytes.</td></tr><tr><td align="left">zoned.cross_read=<em>BOOL</em></td><td align="left">off</td><td align="left">Set to &quot;on&quot; to allow reads to cross zone boundaries.</td></tr><tr><td align="left">zoned.max_active=<em>UINT32</em></td><td align="left">0</td><td align="left">Set the maximum number of active resources (MAR). The default (0) allows all zones to be active.</td></tr><tr><td align="left">zoned.max_open=<em>UINT32</em></td><td align="left">0</td><td align="left">Set the maximum number of open resources (MOR).  The default (0) allows all zones to be open. If <code>zoned.max_active</code> is specified, this value must be less than or equal to that.</td></tr></tbody></table></center><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="qemu-execution-example"></a><em>QEMU</em> Execution Example<a class="hash-link" href="#qemu-execution-example" title="Direct link to heading">#</a></h2><p>The following script uses <em>QEMU</em> to run a virtual machine with 8 CPU cores,
16 GiB of memory, and bridged networking. The bridge device <em>virbr0</em> is assumed
to already exist. The last device added to the virtual machine on the <em>QEMU</em>
command line is a 32 GiB NVMe ZNS device.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><div tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/sh</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Some variables</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">bridge</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;virbr0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">vmimg</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/var/lib/qemu/boot-disk.qcow2&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">znsimg</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;/var/lib/qemu/zns.raw&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Run QEMU</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> /usr/local/bin/qemu-system-x86_64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-name </span><span class="token assign-left variable" style="color:#36acaa">guest</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">FedoraServer34 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-machine pc-q35-5.2,accel</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">kvm </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-m </span><span class="token number" style="color:#36acaa">16384</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-smp </span><span class="token number" style="color:#36acaa">8</span><span class="token plain">,sockets</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">8</span><span class="token plain">,cores</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,threads</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-rtc </span><span class="token assign-left variable" style="color:#36acaa">base</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">utc,driftfix</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">slew </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-nographic </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-no-hpet </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-global ICH9-LPC.disable_s3</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-global ICH9-LPC.disable_s4</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-boot </span><span class="token assign-left variable" style="color:#36acaa">strict</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">on </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-audiodev none,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">noaudio </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-object rng-random,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">objrng0,filename</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">/dev/urandom </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-msg </span><span class="token assign-left variable" style="color:#36acaa">timestamp</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">on </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-device pcie-root-port,port</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0x10,chassis</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pci.1,bus</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pcie.0,multifunction</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">on,addr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0x2 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-netdev bridge,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">hostnet0,br</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">${bridge}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-device virtio-net-pci,netdev</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">hostnet0,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">net0,mac</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">52</span><span class="token plain">:54:00:fa:2d:b9,bus</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pci.1,addr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0x0 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-device pcie-root-port,port</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0x11,chassis</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">2</span><span class="token plain">,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pci.2,bus</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pcie.0,addr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0x2.0x1 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-blockdev node-name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;vmstorage&quot;</span><span class="token plain">,driver</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">qcow2,file.driver</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">file,file.filename</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">${vmimg}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain">,file.node-name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;vmstorage.qcow2&quot;</span><span class="token plain">,file.discard</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">unmap </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-device virtio-blk-pci,bus</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pci.2,addr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0x0,drive</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;vmstorage&quot;</span><span class="token plain">,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">virtio-disk0,bootindex</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-device pcie-root-port,port</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0x12,chassis</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3</span><span class="token plain">,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pci.3,bus</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pcie.0,addr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0x2.0x2 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-device virtio-balloon-pci,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">balloon0,bus</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pci.3,addr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0x0 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-device pcie-root-port,port</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0x13,chassis</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">4</span><span class="token plain">,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pci.4,bus</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pcie.0,addr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0x2.0x3 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-device virtio-rng-pci,rng</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">objrng0,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">rng0,bus</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pci.4,addr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0x0 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-device pcie-root-port,port</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0x14,chassis</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5</span><span class="token plain">,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pci.5,bus</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pcie.0,addr</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0x2.0x4 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-device nvme,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">nvme0,serial</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">deadbeef,zoned.zasl</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">5</span><span class="token plain">,bus</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">pci.5 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-drive </span><span class="token assign-left variable" style="color:#36acaa">file</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">${znsimg}</span><span class="token plain">,id</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">nvmezns0,format</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">raw,if</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">none </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">-device nvme-ns,drive</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">nvmezns0,bus</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">nvme0,nsid</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain">,logical_block_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">4096</span><span class="token plain">,physical_block_size</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">4096</span><span class="token plain">,zoned</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true,zoned.zone_size</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">64M,zoned.zone_capacity</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">62M,zoned.max_open</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">16</span><span class="token plain">,zoned.max_active</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">32</span><span class="token plain">,uuid</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">5e40ec5f-eeb6-4317-bc5e-c919796a5f79</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/getting-started/smr-emulation"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Getting Started with Emulated SMR Hard-Disks</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/linux"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Linux Kernel Support Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#qemu" class="table-of-contents__link"><em>QEMU</em></a><ul><li><a href="#creating-an-emulated-zoned-namespace" class="table-of-contents__link">Creating an Emulated Zoned Namespace</a></li><li><a href="#verifying-an-emulated-zoned-namespace" class="table-of-contents__link">Verifying an Emulated Zoned Namespace</a></li><li><a href="#using-an-emulated-zoned-namespace" class="table-of-contents__link">Using an Emulated Zoned Namespace</a></li><li><a href="#emulated-zoned-namespace-options" class="table-of-contents__link">Emulated Zoned Namespace Options</a></li></ul></li><li><a href="#qemu-execution-example" class="table-of-contents__link"><em>QEMU</em> Execution Example</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/zoned-storage">Introduction to Zoned Storage</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/">Getting Started with Zoned Storage</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://app.element.io/#/room/#zonedstorage-general:matrix.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Matrix</a></li><li class="footer__item"><a href="https://join.slack.com/t/zonedstorage/shared_invite/zt-uyfut5xe-nKajp9YRnEWqiD4X6RkTFw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://webchat.oftc.net/?channels=zonedstorage" target="_blank" rel="noopener noreferrer" class="footer__link-item">IRC @ OFTC</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/westerndigitalcorporation" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Organization</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2022 Western Digital
	Corporation or its affiliates. All rights reserved.<br> By using this site, you agree to the <a href="https://www.westerndigital.com/legal/terms-of-use" target="_blank">Terms of Use</a> and <a href="https://www.westerndigital.com/legal/privacy-statement" target="_blank">Privacy Statement</a>.  All example scripts and program snippets on this site are licensed under the <a href="https://creativecommons.org/publicdomain/zero/1.0/" target="_blank">CCO 1.0 Universal</a> license.<br>This site is built with <a href="https://docusaurus.io/" target="_blank">Docusaurus</a>.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.18692684.js"></script>
<script src="/assets/js/main.e827f9a4.js"></script>
</body>
</html>