<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-getting-started/prerequisites">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0DX1KGD5E4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0DX1KGD5E4",{})</script><title data-rh="true">System Prerequisites | Zoned Storage</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://zonedstorage.io/docs/getting-started/prerequisites"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="System Prerequisites | Zoned Storage"><meta data-rh="true" name="description" content="The zoned block device (ZBD) interface that supports ZBC and ZAC disks was"><meta data-rh="true" property="og:description" content="The zoned block device (ZBD) interface that supports ZBC and ZAC disks was"><link data-rh="true" rel="icon" href="/img/zs-logo.ico"><link data-rh="true" rel="canonical" href="https://zonedstorage.io/docs/getting-started/prerequisites"><link data-rh="true" rel="alternate" href="https://zonedstorage.io/docs/getting-started/prerequisites" hreflang="en"><link data-rh="true" rel="alternate" href="https://zonedstorage.io/docs/getting-started/prerequisites" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.028cc568.css">
<link rel="preload" href="/assets/js/runtime~main.acbffe4f.js" as="script">
<link rel="preload" href="/assets/js/main.f78c3487.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/zs-logo.png" alt="Zoned Storage Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/zs-logo.png" alt="Zoned Storage Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Zoned Storage</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/introduction">Documentation</a><a class="navbar__item navbar__link" href="/docs/community/support">Community</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/westerndigitalcorporation/zonedstorage.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/introduction">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/getting-started">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/getting-started/prerequisites">System Prerequisites</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/nullblk">Zoned Block Device Emulation with nullblk</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/smr-disk">Getting Started with SMR Hard-Disks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/smr-emulation">Getting Started with Emulated SMR Hard-Disks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/getting-started/zns-emulation">Getting Started with Emulated NVMe ZNS Devices</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/linux">Linux Kernel Support</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/applications">Applications</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tools">Tools and Libraries</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tests">System Compliance Tests</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/benchmarking">Performance Benchmarking</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/distributions/linux">Linux Distributions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq">Frequently Asked Questions</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Getting Started</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">System Prerequisites</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>System Prerequisites</h1><p>The zoned block device (ZBD) interface that supports ZBC and ZAC disks was
added to Linux<!-- -->®<!-- --> in kernel version 4.10. All Linux kernel versions since
4.10 include the ZBD interface.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Linux kernels prior to version 4.10 do not implement the ZBD interface.  If you
use a kernel older than kernel 4.10, you can access and manage ZBC and ZAC
disks, but only in a limited way. This is discussed in more detail in the <a href="/docs/linux/overview">Linux
Support</a> document.</p></div></div><p>To verify that the zoned device has been discovered and correctly initalized,
several user utilities must be installed on the test system. These utilities
are discussed in more detail in the section called <a href="/docs/getting-started/prerequisites#user-utilities">User
Utilities</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="linux-kernel">Linux Kernel<a class="hash-link" href="#linux-kernel" title="Direct link to heading">​</a></h2><p>We recommend only systems with Linux kernels that are version 4.10 or
higher for use with ZBC and ZAC hard disks. If you intend to follow
the examples in this Quick Start Guide, we recommend that you use a
Linux distribution that includes ZBD support. More information on
recommended Linux distributions can be found
<a href="/docs/distributions/linux">here</a>.</p><p>ZNS SSDs require zone capacity support, which was introduced in
Linux kernel version 5.9. More information on ZNS SSDs can be found
<a href="/docs/introduction/zns">here</a>.</p><p>Advanced users might want to compile and install a specific Linux
kernel version instead of using the default kernel. If this is the
case, you must enable ZBD support in that kernel.  An explanation of
how to enable ZBD support in the kernel configuration is provided
<a href="/docs/linux/config">here</a>.  We recommend that you always use the
highest available stable kernel version or a long term stable kernel
version higher than 4.10.  Information on available kernel versions
can be found <a href="https://www.kernel.org/" target="_blank" rel="noopener noreferrer">here</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="kernel-version-and-zbd-support">Kernel Version and ZBD Support<a class="hash-link" href="#kernel-version-and-zbd-support" title="Direct link to heading">​</a></h2><p>Two conditions must be met to ensure that a system&#x27;s Linux kernel supports the
ZBD interface.</p><ol><li><p>The kernel version must be 4.10.0 or higher,</p></li><li><p>The kernel compilation configuration option <em>CONFIG_BLK_DEV_ZONED</em> must be
enabled.</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="kernel-version">Kernel Version<a class="hash-link" href="#kernel-version" title="Direct link to heading">​</a></h3><p>The command <code>uname</code> makes it possible to check the version of the
kernel running on a system. For example, on a <em>Fedora 29</em>
distribution, this command and its output is as follows.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># uname -r</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">5.0.13-200.fc29.x86_64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="zoned-block-device-support">Zoned Block Device Support<a class="hash-link" href="#zoned-block-device-support" title="Direct link to heading">​</a></h3><p>Zoned block device support might not be enabled by default in the
running kernel. The kernel configuration option that is used to enable
zoned block device support is <code>CONFIG_BLK_DEV_ZONED</code>.</p><p>There are several methods that can be used to determine whether the
<code>CONFIG_BLK_DEV_ZONED</code> option has been enabled in the kernel.  Not all
of these methods work for every Linux distribution.  In some
distributions, the configuration file for the running kernel can be
found in the <code>/boot</code> directory or in the directory containing the
kernel modules.</p><p>The following commands test whether your installed kernel supports
zoned block devices.</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># cat /boot/config-`uname -r` | grep CONFIG_BLK_DEV_ZONED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONFIG_BLK_DEV_ZONED=y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># cat /lib/modules/`uname -r`/config | grep CONFIG_BLK_DEV_ZONED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONFIG_BLK_DEV_ZONED=y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the output of one of these commands is <code>CONFIG_BLK_DEV_ZONED=y</code>,
then zoned block devices are supported by the kernel. If the output is
<code>CONFIG_BLK_DEV_ZONED=n</code>, then block device support is disabled and
the kernel must be recompiled in order to enable block device support.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>For kernels older than kernel version 4.10, the output of these commands is
always empty.</p></div></div><p>If your kernel exports its configuration through the <em>proc</em> file
system, use one of the following sets of commands to retreive the
status of <code>CONFIG_BLK_DEV_ZONED</code>:</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># modprobe configs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># cat /proc/config.gz | gunzip | grep CONFIG_BLK_DEV_ZONED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONFIG_BLK_DEV_ZONED=y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># modprobe configs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># zcat /proc/config.gz | grep CONFIG_BLK_DEV_ZONED</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CONFIG_BLK_DEV_ZONED=y</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="write-ordering-control">Write Ordering Control<a class="hash-link" href="#write-ordering-control" title="Direct link to heading">​</a></h3><p>By default, the Linux kernel does not guarantee the order in which
commands are delivered to a block device. This means that an
application that writes sequentially to a disk might have its write
commands delivered to the disk in a different order than the order
sent by the application. This might cause write errors if the
application is writing to a zoned device over sequential zones.</p><p>To avoid this problem, a &quot;zone write lock mechanism&quot; that serializes
writes to sequential zones is implemented by all kernels that support
zoned block devices. For kernel versions between 4.10 and 4.15
(inclusive) no special configuration is necessary and the kernel
guarantees the delivery of write commands to the device in the same
order as the order of write requests issued by the application.</p><p>However, in kernel version 4.16, the implementation of zone write
locking was moved to the <em>deadline</em> and <em>mq-deadline</em>
block I/O scheduler. Therefore, in kernels of version 4.16 and
higher, you must use this scheduler with zoned block devices in order
to make the kernel guarantee the order of write commands.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The <em>mq-deadline</em> block I/O scheduler is enabled only if the SCSI multi-queue
(<em>scsi-mq</em>) infrastructure is enabled. This feature use can be controlled by
using the kernel boot argument <em>scsi_mod.use_blk_mq</em>. The default has been
<em>scsi-mq</em> since kernel version 5.0 and the legacy single-queue SCSI command path
is no longer supported.</p></div></div><p>To see which block I/O scheduler a zoned disk uses, run the following command:</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># cat /sys/block/sdb/queue/scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[none] mq-deadline kyber bfq</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If the disk block I/O scheduler that has been selected is not
<em>mq-deadline</em> as in the example above, use the following command to
change the scheduler:</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># echo mq-deadline &gt; /sys/block/sdb/queue/scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># cat sys/block/sdb/queue/scheduler</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[mq-deadline] kyber bfq none</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="user-utilities">User Utilities<a class="hash-link" href="#user-utilities" title="Direct link to heading">​</a></h2><p>Various user level tools must also be installed in order to verify the
correct operation of zoned block devices and to troubleshoot problems.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lsblk">lsblk<a class="hash-link" href="#lsblk" title="Direct link to heading">​</a></h3><p>The <code>lsblk</code> command in Linux lists block devices, which includes zoned block
devices. This utility is usually included in the <em>util-linux</em> package, which is
installed by default on most Linux distributions.</p><p><em>lsblk</em> usage examples are provided in the <a href="/docs/tools/util-linux#lsblk">lsblk section of the tools
documentation page</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="blkzone">blkzone<a class="hash-link" href="#blkzone" title="Direct link to heading">​</a></h3><p>The <code>blkzone</code> utility lists (reports) the zones of a zoned block device and
makes it possible to reset the write pointer position of a range of zones in
the device. This utility is usually included in the <em>util-linux</em> package, which
is installed by default on most Linux distributions.</p><p><em>blkzone</em> usage examples are provided in the <a href="/docs/tools/util-linux#blkzone">blkzone section of the tools
documentation page</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lsscsi">lsscsi<a class="hash-link" href="#lsscsi" title="Direct link to heading">​</a></h3><p>The <a href="http://sg.danny.cz/scsi/lsscsi.html" target="_blank" rel="noopener noreferrer"><em>lsscsi</em></a>
command lists information about the SCSI devices connected to a Linux system.
<em>lsscsi</em> is generally available as a package in most Linux distributions.
Refer to your distribution documentation to find the name of the package
that provides the <em>lsscsi</em> utility.</p><p>The <a href="/docs/tools/sg3utils#lsscsi">linux utilities</a> page provides more
information on <code>lssci</code> as well as usage examples.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="sg3_utils">sg3_utils<a class="hash-link" href="#sg3_utils" title="Direct link to heading">​</a></h3><p>The <a href="http://sg.danny.cz/sg/sg3_utils.html" target="_blank" rel="noopener noreferrer"><em>sg3_utils</em></a> package is a collection of command
line tools that send SCSI commands to a SCSI device.</p><p>In Linux, all disks are exposed as SCSI disks. This includes ATA
drives.  <code>sg3_utils</code> can be used to manage SAS ZBC disks as well as
SATA ZAC disks. When dealing with SATA disks connected to SATA ports
(for example, an AHCI adapter), the kernel ATA subsystem (libata)
translates SCSI commands into ATA commands.</p><p><em>sg3_utils</em> includes three command line tools specific to ZBC disks:</p><center><table><thead><tr><th align="left">Utility Name</th><th align="left">SCSI Command Invoked</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><strong>sg_rep_zones</strong></td><td align="left">REPORT ZONES</td><td align="left">Get the ZBC disk&#x27;s zone information</td></tr><tr><td align="left"><strong>sg_reset_wp</strong></td><td align="left">RESET WRITE POINTER</td><td align="left">Reset one zone or all zones of the ZBC disk</td></tr><tr><td align="left"><strong>sg_zone</strong></td><td align="left">CLOSE ZONE, FINISH ZONE, OPEN ZONE</td><td align="left">Sends one of these commands to the given ZBC disk</td></tr></tbody></table></center><p><a href="/docs/tools/sg3utils#sg3_utils">This section</a> shows some examples of these
utilities execution.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="libzbc">libzbc<a class="hash-link" href="#libzbc" title="Direct link to heading">​</a></h3><p><em>libzbc</em> is a user-space library that provides functions that are
used to manipulate ZBC and ZAC disks.  The <em>libzbc</em> project is hosted
on <a href="https://github.com/westerndigitalcorporation/libzbc" target="_blank" rel="noopener noreferrer"> GitHub</a>. Documentation is provided in the
project <a href="https://github.com/westerndigitalcorporation/libzbc/blob/master/README.md" target="_blank" rel="noopener noreferrer"> README</a> file. The API documentation can be generated using
<em>doxygen</em>.</p><p><em>libzbc</em> provides a set of command-line utilities that are
functionally similar to both the <code>blkzone</code> utility and <em>the sg3_utils</em>
command-line tools.</p><p>For more information on how to compile and install <em>libzbc</em>, as well as usage
examples of the command line utilities provided by <em>libzbc</em>, see <a href="/docs/tools/libzbc">libzbc User
Library</a> in the <a href="/docs/tools">Tools and Libraries</a>
documentation.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/getting-started"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/getting-started/nullblk"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Zoned Block Device Emulation with nullblk</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#linux-kernel" class="table-of-contents__link toc-highlight">Linux Kernel</a></li><li><a href="#kernel-version-and-zbd-support" class="table-of-contents__link toc-highlight">Kernel Version and ZBD Support</a><ul><li><a href="#kernel-version" class="table-of-contents__link toc-highlight">Kernel Version</a></li><li><a href="#zoned-block-device-support" class="table-of-contents__link toc-highlight">Zoned Block Device Support</a></li><li><a href="#write-ordering-control" class="table-of-contents__link toc-highlight">Write Ordering Control</a></li></ul></li><li><a href="#user-utilities" class="table-of-contents__link toc-highlight">User Utilities</a><ul><li><a href="#lsblk" class="table-of-contents__link toc-highlight">lsblk</a></li><li><a href="#blkzone" class="table-of-contents__link toc-highlight">blkzone</a></li><li><a href="#lsscsi" class="table-of-contents__link toc-highlight">lsscsi</a></li><li><a href="#sg3_utils" class="table-of-contents__link toc-highlight">sg3_utils</a></li><li><a href="#libzbc" class="table-of-contents__link toc-highlight">libzbc</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/zoned-storage">Introduction to Zoned Storage</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started with Zoned Storage</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://app.element.io/#/room/#zonedstorage-general:matrix.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Matrix<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/zonedstorage/shared_invite/zt-uyfut5xe-nKajp9YRnEWqiD4X6RkTFw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://webchat.oftc.net/?channels=zonedstorage" target="_blank" rel="noopener noreferrer" class="footer__link-item">IRC @ OFTC<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/westerndigitalcorporation" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Organization<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Western Digital
	Corporation or its affiliates. All rights reserved.<br> By using this site, you agree to the <a href="https://www.westerndigital.com/legal/terms-of-use" target="_blank">Terms of Use</a> and <a href="https://www.westerndigital.com/legal/privacy-statement" target="_blank">Privacy Statement</a>.  All example scripts and program snippets on this site are licensed under the <a href="https://creativecommons.org/publicdomain/zero/1.0/" target="_blank">CCO 1.0 Universal</a> license.<br>This site is built with <a href="https://docusaurus.io/" target="_blank">Docusaurus</a>.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.acbffe4f.js"></script>
<script src="/assets/js/main.f78c3487.js"></script>
</body>
</html>